(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3430)}])},3430:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(9008),o=t.n(i),s=t(7294);let a=e=>{let n="=".repeat((4-e.length%4)%4),t=(e+n).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(t),i=new Uint8Array(r.length);for(let e=0;e<r.length;++e)i[e]=r.charCodeAt(e);return i};n.default=()=>{let[e,n]=(0,s.useState)(!1),[t,i]=(0,s.useState)(null),[l,u]=(0,s.useState)(null);(0,s.useEffect)(()=>{"serviceWorker"in navigator&&void 0!==window.workbox&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(e=>{e&&!(e.expirationTime&&Date.now()>e.expirationTime-3e5)&&(i(e),n(!0))}),u(e)})},[]);let c=async e=>{if(!l){console.error("No SW registration available.");return}e.preventDefault();let t=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a("BCCO9GiUuFoBSe2vGAnkAHQH2QKx-nMrTKH7iRSgb9SUe4AnneleHvZ22YWpgFP2e-6YQPPHQNP7birxO9t6a_U")});i(t),n(!0),console.log("Web push subscribed!"),console.log(t)},b=async e=>{if(!t){console.error("Web push not subscribed");return}e.preventDefault(),await t.unsubscribe(),i(null),n(!1),console.log("Web push unsubscribed!")},p=async e=>{if(e.preventDefault(),!t){console.error("Web push not subscribed");return}await fetch("/api/notification",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:t})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"next-pwa example"})}),(0,r.jsx)("h1",{children:"Next.js + PWA = AWESOME!"}),(0,r.jsx)("button",{type:"button",onClick:c,disabled:e,children:"Subscribe"}),(0,r.jsx)("button",{type:"button",onClick:b,disabled:!e,children:"Unsubscribe"}),(0,r.jsx)("button",{type:"button",onClick:p,disabled:!e,children:"Send Notification"})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);